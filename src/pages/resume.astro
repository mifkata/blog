---
import PageLayout from "@/layouts/PageLayout.astro";
import PageHeader from "@/components/pages/common/PageHeader/PageHeader.astro";
import SectionHeader from "@/components/pages/common/SectionHeader/SectionHeader.astro";
import ContactCTA from "@/components/pages/common/ContactCTA/ContactCTA.astro";
import SkillsGrid from "@/components/pages/resume/SkillsGrid/SkillsGrid.astro";
import ExperienceTimeline from "@/components/pages/resume/ExperienceTimeline/ExperienceTimeline.astro";
import EarlyCareer from "@/components/pages/resume/EarlyCareer/EarlyCareer.astro";
import Briefcase from "@/components/ui/icons/Briefcase.astro";
import Code from "@/components/ui/icons/Code.astro";
import { SITE_TITLE } from "@/consts";

const skills = [
  {
    name: "backend",
    icon: "server",
    items: [
      "Node.js",
      "TypeScript",
      "Fastify",
      "Express",
      "GraphQL",
      "REST APIs",
    ],
  },
  {
    name: "frontend",
    icon: "layout",
    items: ["React", "Next.js", "Angular", "Tailwind", "Storybook"],
  },
  {
    name: "databases",
    icon: "database",
    items: ["PostgreSQL", "MySQL", "MongoDB", "Redis"],
  },
  {
    name: "cloud",
    icon: "cloud",
    items: ["AWS", "GCP", "Kubernetes", "Docker", "Terraform"],
  },
  {
    name: "testing",
    icon: "check",
    items: ["Jest", "Playwright", "Cypress", "Mocha"],
  },
  {
    name: "tools",
    icon: "tool",
    items: ["Git", "CI/CD", "Jenkins", "CircleCI", "GitHub Actions"],
  },
];

const experience = [
  {
    title: "Software Engineering Consultant",
    company: "Tricky Click (Owner)",
    location: "Global",
    dates: "Nov 2016 – Present",
    current: true,
    description:
      "Operating as an independent consultant via a limited company, delivering high-level engineering solutions for global clients through agencies including Vertex, Accenture, Xoomworks, and 101 Ways.",
    roles: [
      {
        client: "Checkatrade",
        period: "Feb 2024 – Apr 2025",
        highlights: [
          "Led foundational design of a new microservice ecosystem enabling technical transformation",
          "Built unified BFF layer for native mobile app, later decomposed into independent services",
          "Established schema-driven, self-documenting API standards using Fastify and TypeScript",
          "Delivered reusable tooling, boilerplates, and top-down integration test frameworks",
          "Rebuilt web frontend using React micro-frontends and Contentful-based workflows",
          "Executed large-scale migration from WordPress to headless CMS",
        ],
        tech: "Node.js, TypeScript, Fastify, TypeORM, React, Next.js, Tailwind, Playwright, PostgreSQL, GCP, Kubernetes, Docker, Contentful",
      },
      {
        client: "McKinsey & Company — Cleansheet Platform",
        period: "Apr 2023 – Feb 2024",
        highlights: [
          "Delivered features across computationally heavy SaaS platform for manufacturing cost optimisation",
          "Developed frontend and backend features in large distributed environment",
          "Improved CI/CD reliability, optimised pipelines, and containerisation refinements",
        ],
        tech: "Node.js, TypeScript, React, Redux, AWS (Lambda, EC2, ECS, S3), Redis, PostgreSQL, Jenkins",
      },
      {
        client: "FT.com (Financial Times)",
        period: "Mar 2022 – Mar 2023 & Jun 2020 – Apr 2021",
        highlights: [
          "Built enterprise tools for B2B subscription and account management",
          "Developed REST and GraphQL microservices integrated with Next.js applications",
          "Worked on landing pages, paywalls, subscription flows, and performance-sensitive features",
        ],
        tech: "Node.js, GraphQL, TypeScript, Next.js, React, Jest, CircleCI, AWS, Redis, PostgreSQL",
      },
      {
        client: "NextBasket.com",
        period: "Nov 2022 – Feb 2023",
        highlights: [
          "Served as Interim Principal Engineer for well-funded startup",
          "Performed full audit of architecture, code quality, and engineering processes",
          "Provided solutions to systemic technical and organisational issues",
          "Supported backend, frontend, QA, and SRE teams for better cross-functional flow",
        ],
        tech: "Architecture, Team Enablement, Process Improvement",
      },
      {
        client: "Synaesthesia.cloud",
        period: "Mar 2022 – Jun 2022",
        highlights: [
          "Re-engineered document-analysis ETL pipeline into modular serverless architecture",
          "Split monolithic prototype into multiple microservices and functions",
          "Established infrastructure provisioning and deployments via Terraform",
        ],
        tech: "Node.js, Fastify, Next.js, React, Terraform, GCP (Cloud Functions, GCS)",
      },
      {
        client: "Expert-Series.com (Financial Times)",
        period: "Apr 2021 – Mar 2022",
        highlights: [
          "Built new product using Node/Next.js monolith with SSR",
          "Integrated complex billing flows via Zuora and Checkout.com",
          "Implemented backend APIs, frontend UI, and CI/CD pipelines",
        ],
        tech: "Node.js, TypeScript, Fastify, Next.js, React, Swagger, Knex, PostgreSQL, AWS, Heroku",
      },
      {
        client: "Toptal (Core Team)",
        period: "Sep 2019 – Apr 2020",
        highlights: [
          "Joined core team as Growth Engineer for page performance and SEO optimisation",
          "Integrated acquired web estates and built high-impact SSR pages",
          "Contributed to Terraform-powered infrastructure and automated deployments",
        ],
        tech: "React, TypeScript, Next.js, Ruby on Rails, BigQuery, Terraform, Docker, Jenkins",
      },
      {
        client: "DAZN",
        period: "Apr 2018 – Mar 2019",
        highlights: [
          "Built reactive frontend components with MobX and React",
          "Developed Node.js microservices and infrastructure-as-code using Terraform",
          "Strengthened platform reliability with unit, integration, E2E, and load tests",
        ],
        tech: "React, MobX, Node.js, Express, Terraform, AWS, Docker, Jenkins, Selenium",
      },
      {
        client: "Glimpse.me",
        period: "May 2017 – Apr 2018",
        highlights: [
          "Delivered core features across backend, frontend, and sockets microservices",
          "Built Node.js backend, Angular 4 SPA, and real-time socket infrastructure",
        ],
        tech: "Sails.js, Express, Angular 4, Redis, PostgreSQL, MongoDB, SocketCluster, JWT",
      },
      {
        client: "Adaptemy",
        period: "Nov 2016 – Aug 2017",
        highlights: [
          "Re-architected large AngularJS SPA into ES6 modular system",
          "Implemented offline-first capabilities using service workers",
          "Built React/Redux QTI editor for educational content",
        ],
        tech: "AngularJS, ES6, React, Redux, Service Workers",
      },
    ],
  },
  {
    title: "Senior Software Engineer",
    company: "EPAM Systems",
    location: "Bulgaria",
    dates: "Mar 2015 – Dec 2016",
    current: false,
    description:
      "Frontend engineering for complex financial applications, trading platforms, and algorithmic decisioning systems.",
    highlights: [
      "Developed AngularJS and React applications for trading platforms",
      "Delivered high-performance UIs with strong test coverage",
      "Produced reusable components and UI frameworks",
    ],
    tech: "AngularJS, React, Redux, ES6, Bootstrap, Karma, Jasmine, Mocha",
  },
  {
    title: "Software Architect",
    company: "Zeduki",
    location: "Remote",
    dates: "Oct 2014 – Jan 2015",
    current: false,
    description:
      "Designed migration strategy from legacy PHP platform to scalable modern backend stack.",
    tech: "Slim PHP, Doctrine 2, Twig, AngularJS",
  },
  {
    title: "Senior Software Engineer",
    company: "EveryMatch",
    location: "Israel",
    dates: "Jun 2014 – Oct 2014",
    current: false,
    description:
      "Delivered full Angular SPA integrated with .NET/MongoDB backend, including hundreds of custom components.",
    tech: "AngularJS, .NET, MongoDB",
  },
  {
    title: "Senior Software Engineer",
    company: "Tech Huddle",
    location: "Sofia",
    dates: "Feb 2014 – May 2014",
    current: false,
    description:
      "Migrated high-traffic mobile site from legacy PHP to Yii framework.",
    tech: "PHP, Yii, MySQL, JavaScript",
  },
  {
    title: "Senior Software Engineer",
    company: "Fantastic Services",
    location: "UK/Bulgaria",
    dates: "Apr 2013 – Oct 2013",
    current: false,
    description:
      "Built Magento e-commerce store and designed large real-time support platform serving thousands of websites.",
    tech: "Magento, Custom Architecture, PHP",
  },
  {
    title: "QA / Engineer / Creative Lead",
    company: "WebMatrix",
    location: "Bulgaria",
    dates: "Sep 2010 – Oct 2012",
    current: false,
    description:
      "Transitioned from QA to development on penny auction sites and web-based games. Managed creative team for game content delivery.",
    tech: "Symfony, jQuery, PHP, MySQL, Joomla",
  },
];

const earlyCareer = {
  period: "2000 – 2010",
  description:
    "PHP developer, webmaster, and freelancer building full sites, affiliate platforms, CMS systems, and custom tooling.",
  companies: [
    "Mansion Productions (MPA2/MPA3)",
    "Virus Advertising",
    "Black Sea Consulting",
    "Freelance",
  ],
};
---

<PageLayout
  title={`Resume | ${SITE_TITLE}`}
  description="25+ years of software engineering experience across backend, frontend, DevOps, and architecture"
  size="wide"
>
  <PageHeader
    title="Resume"
    subtitle="25+ years building software — from affiliate sites in 2000 to microservice architectures today."
    description="Full-stack engineer specialising in Node.js, TypeScript, React, and cloud infrastructure. Currently consulting through Tricky Click for global clients."
  />

  <section class="mb-12">
    <SectionHeader title="Technical Skills" class="pb-6">
      <Code size={24} class="text-[#6FA4AF]" slot="icon" />
    </SectionHeader>
    <SkillsGrid skills={skills} />
  </section>

  <section class="mb-12">
    <SectionHeader title="Professional Experience" class="mb-8 pb-6">
      <Briefcase size={24} class="text-[#B8C4A9]" slot="icon" />
    </SectionHeader>
    <ExperienceTimeline experience={experience} />
    <EarlyCareer
      period={earlyCareer.period}
      description={earlyCareer.description}
      companies={earlyCareer.companies}
    />
  </section>

  <ContactCTA
    headline="Interested in working together?"
    description="I'm available for contract engagements and consulting work."
  />
</PageLayout>
