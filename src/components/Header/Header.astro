---
import Button from "@/components/Button/Button.astro";
import HeaderLink from "@/components/HeaderLink/HeaderLink.astro";
import Document from "@/components/icons/Document.astro";
import Menu from "@/components/icons/Menu.astro";
---

<header class="px-6 py-4 bg-white sticky top-0 z-50 shadow-sm">
  <nav class="max-w-[960px] mx-auto flex items-center justify-between">
    <h1 class="text-2xl m-0 lg:ml-8 whitespace-nowrap">
      <a href="/" class="text-black no-underline hover:text-accent">
        {"<MIFKATA />"}
      </a>
    </h1>
    <div class="hidden md:flex items-center gap-8 lg:mr-6">
      <div class="flex items-center gap-6 uppercase">
        <HeaderLink href="/blog" number="01">Blog</HeaderLink>
        <HeaderLink href="/about" number="02">About</HeaderLink>
        <HeaderLink href="/services" number="03">Services</HeaderLink>
      </div>
      <Button href="/resume" variant="inverse">
        <Document size={16} />
        Resume
      </Button>
    </div>
    <button
      class="md:hidden p-2 text-black"
      id="mobile-menu-toggle"
      aria-label="Toggle menu"
    >
      <Menu size={24} />
    </button>
  </nav>
  <div
    class="hidden md:hidden bg-white max-h-[calc(100vh-60px)] overflow-y-auto relative z-50"
    id="mobile-menu"
  >
    <div class="flex flex-col gap-4 py-4 uppercase">
      <HeaderLink href="/blog" number="01">Blog</HeaderLink>
      <HeaderLink href="/about" number="02">About</HeaderLink>
      <HeaderLink href="/services" number="03">Services</HeaderLink>
      <Button href="/resume" variant="inverse" class="mt-2 self-start">
        <Document size={16} />
        Resume
      </Button>
    </div>
  </div>
</header>

<!-- Mobile menu overlay -->
<div
  class="fixed inset-0 bg-black/60 z-40 hidden md:hidden"
  id="mobile-menu-overlay"
>
</div>

<script>
  function setupMobileMenu() {
    const toggle = document.getElementById("mobile-menu-toggle");
    const menu = document.getElementById("mobile-menu");
    const overlay = document.getElementById("mobile-menu-overlay");

    function openMenu() {
      menu?.classList.remove("hidden");
      overlay?.classList.remove("hidden");
      document.body.style.overflow = "hidden";
    }

    function closeMenu() {
      menu?.classList.add("hidden");
      overlay?.classList.add("hidden");
      document.body.style.overflow = "";
    }

    function toggleMenu() {
      const isHidden = menu?.classList.contains("hidden");
      if (isHidden) {
        openMenu();
      } else {
        closeMenu();
      }
    }

    if (toggle) {
      toggle.addEventListener("click", toggleMenu);
    }

    if (overlay) {
      overlay.addEventListener("click", closeMenu);
    }
  }
  setupMobileMenu();
  document.addEventListener("astro:page-load", setupMobileMenu);
</script>
