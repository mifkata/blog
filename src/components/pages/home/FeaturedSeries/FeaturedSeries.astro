---
import { getSeriesWithPosts } from "@/helpers/series";
import { FeaturedSeries, type SeriesItem } from "./FeaturedSeries";

interface Props {
  slug: string;
}

const { slug } = Astro.props;
const series = await getSeriesWithPosts(slug);

const items: SeriesItem[] = series.items.map((item) => ({
  url: item.url,
  title: item.title,
  synopsis: item.data?.synopsis,
  heroImage:
    typeof item.data?.heroImage === "string"
      ? item.data.heroImage
      : item.data?.heroImage?.src,
  updatedDate: (item.data?.updatedDate || item.data?.pubDate)?.toISOString(),
}));
---

<FeaturedSeries title={series.title} items={items} client:load client:visible />
